!function(e){e.fn.pavoNewsletter=function(s){var i=this;return s=e.extend({},{message:""},s),this.work=function(s){switch(e(this).data("mode")){case"popup":if(1==i.getCookie("cnewsletter"))return!0;i.showPopup(s);break;case"flybot":if(1==i.getCookie("cnewsletter"))return!0;i.flybot(s)}i.submit(s)},this.flybot=function(s){var t=e(s).parent();t.appendTo("body"),e(t).slideToggle(),t.removeClass("hide").addClass("slide-bottom"),e(".button-slide",t).click(function(){e(t).slideToggle()}),e(":checkbox",t).click(function(){i.setCookie("cnewsletter","1",10),e(t).slideToggle()})},this.showPopup=function(s){e.magnificPopup.open({items:{src:s,type:"inline",width:"500"}}),e(":checkbox",s).click(function(){i.setCookie("cnewsletter","1",10),e.magnificPopup.close()})},this.setCookie=function(e,s,i){var t=new Date;t.setTime(t.getTime()+24*i*60*60*1e3);var n="expires="+t.toUTCString();document.cookie=e+"="+s+";"+n+";path=/"},this.getCookie=function(e){for(var s=e+"=",i=decodeURIComponent(document.cookie).split(";"),t=0;t<i.length;t++){for(var n=i[t];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(s))return n.substring(s.length,n.length)}return""},this.isValidEmailAddress=function(e){return new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e)},this.submit=function(s){e(s).on("submit",function(){var t=e(".inputNew").val();if(e(".success_inline, .warning_inline, .error").remove(),!i.isValidEmailAddress(t))return e(s).find("#email").addClass("has-error"),!1;e(s).find("#email").removeClass("has-error");var n=e(s).attr("action");return e.ajax({type:"post",url:n,data:e(s).serialize(),dataType:"json",success:function(s){e(".success_inline, .warning_inline, .error").remove(),s.error&&(e("#subscribe .done .msg").text(s.success),e("#subscribe .done").css("display","flex")),s.success&&(e("#subscribe .done .msg").text(s.success),e("#subscribe .done").css("display","flex"))}}),!1})},e(this).each(function(){i.work(e(this).find("form"))})}}(jQuery);
