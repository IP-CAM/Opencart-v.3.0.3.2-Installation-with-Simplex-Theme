{{ header }}
<main>
    <div class="container-fluid">
        <ul class="breadcrumb">
            {% for breadcrumb in breadcrumbs %}
                {% if loop.first %}
                    <li><a href="{{ breadcrumb.href }}"><img alt="Home"
                                                             src="catalog/view/theme/simplex/assets/img/home.svg"></a>
                    </li>
                {% else %}
                    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
                {% endif %}
            {% endfor %}

        </ul>
        <div class="page-title" id="wishlist">
            <h1>{{ heading_title }}</h1>
        </div>

        <div class="wish-wrapper wrapper">
            <a id="delete-all" class="delete-all-from-wishlist" role="button">Sterge toate</a>
            <div class="wish products">
                {% for product in products %}
                    <div class="product-column">
                        <div class="product">
                            <a href="{{ product.href }}">
                                <div class="image-container">
                                    <img alt="" src="{{ product.thumb }}">
                                </div>
                                <div class="product-body">
                                    <h5 class="title">{{ product.name }}</h5>
                                    <div class="price-container">
                                        <div class="discount">
                                            {% if product.special %}
                                                <p class="old-price">{{ product.price }}.-</p>
                                                <p class="discount-percent">-{{ product.special_percentage }}%</p>
                                                <p class="discount-val">-{{ product.economy }}</p>
                                            {% endif %}
                                        </div>
                                        {% if product.special %}
                                            <p class="price">{{ product.special }}.-</p>
                                        {% else %}
                                            <p class="price">{{ product.price }}.-</p>
                                        {% endif %}
                                        <p class="currency">{{ currency }}</p>
                                    </div>
                                </div>
                            </a>


                            <button class="add-to-cart" onclick="cart.add('{{ product.product_id }}');">
                                <p>{{ button_cart }}</p>
                                <span class="image-container">
                                    <img alt="Cart" src="catalog/view/theme/simplex/assets/img/cart.png">
                                    </span>
                            </button>

                            <div class="float-buttons">
                                <button class="compare" href="#" onclick="compare.add('{{ product.product_id }}');"><img
                                            alt=""
                                            src="catalog/view/theme/simplex/assets/img/compare.png">
                                </button>
                            </div>
                            <a class="delete delete-from-wishlist" data-product_id="{{ product.product_id }}" role="button"></a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</main>
<script>
    wishlist.remove=function(product_id) {
        $.ajax({
            url: 'index.php?route=account/wishlist/remove',
            type: 'post',
            data: 'product_id=' + product_id,
            dataType: 'json',
            success: function(json) {
                $('.alert-dismissible').remove();

                if (json['redirect']) {
                    location = json['redirect'];
                }

                if (json['success']) {
                    $('#content').parent().before('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');
                }

                $('#wishlist-total span').html(json['total']);
                $('#wishlist-total').attr('title', json['total']);

                $('html, body').animate({ scrollTop: 0 }, 'slow');
            },
            error: function(xhr, ajaxOptions, thrownError) {
                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
            }
        });
    }

</script>
{{ content_bottom }}
{{ footer }}